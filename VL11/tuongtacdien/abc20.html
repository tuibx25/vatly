<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trắc Nghiệm Vật Lý 11 - Bài 16 (20 Câu Đa Dạng)</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .difficulty-indicator {
            display: inline-block;
            margin: 5px;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .easy { background-color: #2ecc71; color: white; }
        .medium { background-color: #f39c12; color: white; }
        .hard { background-color: #e74c3c; color: white; }
        
        .timer {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            display: inline-block;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .quiz-info {
            display: flex;
            justify-content: space-between;
            padding: 15px 30px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
        }
        
        .info-item {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }
        
        .info-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        .info-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .questions-container {
            padding: 25px 30px;
        }
        
        .question {
            background-color: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .question:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .question-number {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }
        
        .question-number:before {
            content: "Câu";
            margin-right: 8px;
        }
        
        .question-number span {
            background-color: #3498db;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .question-difficulty {
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .question-text {
            margin-bottom: 18px;
            font-weight: 500;
            line-height: 1.7;
        }
        
        .options {
            padding-left: 5px;
        }
        
        .option {
            margin-bottom: 12px;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background-color: #e8f4fc;
            border-color: #b3d7f5;
        }
        
        .option input {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .option.selected {
            background-color: #e1f0ff;
            border-color: #3498db;
        }
        
        .option.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            padding: 20px 30px;
            background-color: #f8f9fa;
            border-top: 1px solid #eee;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .btn-prev {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-prev:hover {
            background-color: #5a6268;
        }
        
        .btn-next {
            background-color: #3498db;
            color: white;
        }
        
        .btn-next:hover {
            background-color: #2980b9;
        }
        
        .btn-submit {
            background-color: #27ae60;
            color: white;
        }
        
        .btn-submit:hover {
            background-color: #219653;
        }
        
        .btn-restart {
            background-color: #e74c3c;
            color: white;
        }
        
        .btn-restart:hover {
            background-color: #c0392b;
        }
        
        .btn-disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .btn-disabled:hover {
            background-color: #bdc3c7;
        }
        
        .progress-container {
            padding: 0 30px 20px;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .results-container {
            padding: 30px;
            text-align: center;
            display: none;
        }
        
        .results-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            margin: 0 auto 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: bold;
        }
        
        .score-label {
            font-size: 1.1rem;
        }
        
        .results-details {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .result-item {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 10px;
            min-width: 150px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .result-label {
            color: #666;
            margin-top: 5px;
        }
        
        .result-correct {
            border-top: 4px solid #27ae60;
        }
        
        .result-incorrect {
            border-top: 4px solid #e74c3c;
        }
        
        .result-time {
            border-top: 4px solid #3498db;
        }
        
        .question-review {
            max-height: 500px;
            overflow-y: auto;
            margin-top: 30px;
            text-align: left;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        .review-title {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .review-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        
        .review-question {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .review-difficulty {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
            white-space: nowrap;
        }
        
        .review-answer {
            color: #27ae60;
            font-weight: 600;
        }
        
        .review-user-answer {
            color: #e74c3c;
        }
        
        .difficulty-stats {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
            gap: 15px;
        }
        
        .difficulty-stat {
            padding: 15px;
            border-radius: 8px;
            min-width: 120px;
            text-align: center;
        }
        
        .difficulty-stat.easy-stat {
            background-color: #d4edda;
            border: 2px solid #2ecc71;
        }
        
        .difficulty-stat.medium-stat {
            background-color: #fff3cd;
            border: 2px solid #f39c12;
        }
        
        .difficulty-stat.hard-stat {
            background-color: #f8d7da;
            border: 2px solid #e74c3c;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            
            button {
                width: 100%;
            }
            
            .quiz-info {
                flex-direction: column;
                gap: 15px;
            }
            
            .info-item {
                min-width: 100%;
            }
            
            .question-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .question-difficulty {
                margin-top: 5px;
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TRẮC NGHIỆM VẬT LÝ 11 - BÀI 16</h1>
            <p class="subtitle">Lực hút và lực đẩy giữa các điện tích</p>
            <p class="subtitle">20 câu hỏi đa dạng độ khó</p>
            <div>
                <span class="difficulty-indicator easy">Dễ: 8 câu</span>
                <span class="difficulty-indicator medium">Trung bình: 8 câu</span>
                <span class="difficulty-indicator hard">Khó: 4 câu</span>
            </div>
            <div class="timer" id="timer">Thời gian: 00:00</div>
        </header>
        
        <div class="quiz-info">
            <div class="info-item">
                <div class="info-label">Câu hỏi</div>
                <div class="info-value" id="current-question">1/20</div>
            </div>
            <div class="info-item">
                <div class="info-label">Đã trả lời</div>
                <div class="info-value" id="answered-count">0/20</div>
            </div>
            <div class="info-item">
                <div class="info-label">Thời gian</div>
                <div class="info-value" id="time-elapsed">00:00</div>
            </div>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span>Bắt đầu</span>
                <span>Hoàn thành</span>
            </div>
        </div>
        
        <div class="questions-container" id="questions-container">
            <!-- Câu hỏi sẽ được tạo bằng JavaScript -->
        </div>
        
        <div class="controls">
            <button class="btn-prev" id="prev-btn">Câu trước</button>
            <button class="btn-next" id="next-btn">Câu tiếp theo</button>
            <button class="btn-submit" id="submit-btn" style="display: none;">Nộp bài</button>
        </div>
        
        <div class="results-container" id="results-container">
            <h2 class="results-title">KẾT QUẢ BÀI LÀM</h2>
            
            <div class="score-circle">
                <div class="score-value" id="score-value">0</div>
                <div class="score-label">điểm</div>
            </div>
            
            <div class="results-details">
                <div class="result-item result-correct">
                    <div class="result-value" id="correct-count">0</div>
                    <div class="result-label">Câu đúng</div>
                </div>
                <div class="result-item result-incorrect">
                    <div class="result-value" id="incorrect-count">0</div>
                    <div class="result-label">Câu sai</div>
                </div>
                <div class="result-item result-time">
                    <div class="result-value" id="final-time">00:00</div>
                    <div class="result-label">Thời gian</div>
                </div>
            </div>
            
            <div class="difficulty-stats" id="difficulty-stats">
                <!-- Thống kê theo độ khó sẽ được thêm ở đây -->
            </div>
            
            <div class="question-review" id="question-review">
                <!-- Xem lại câu hỏi sẽ được thêm ở đây -->
            </div>
            
            <button class="btn-restart" id="restart-btn" style="margin-top: 30px;">Làm lại bài trắc nghiệm</button>
        </div>
        
        <div class="footer">
            <p>Trắc nghiệm Vật Lý 11 - Bài 16: Lực hút và lực đẩy giữa các điện tích</p>
            <p>20 câu hỏi đa dạng độ khó - Thời gian làm bài: 30 phút</p>
            <p>© 2023 - Tài liệu học tập Vật Lý 11</p>
        </div>
    </div>

    <script>
        // Dữ liệu câu hỏi và đáp án (20 câu với độ khó khác nhau)
        const quizData = [
            {
                question: "Hiện tượng nào sau đây là biểu hiện của tương tác điện?",
                options: [
                    "A. Nam châm hút đinh sắt.",
                    "B. Thanh thủy tinh cọ xát vào lụa hút các vụn giấy.",
                    "C. Trái Đất hút các vật về phía nó.",
                    "D. Lò xo bị nén sinh ra lực đẩy."
                ],
                correct: 1,
                difficulty: "easy"
            },
            {
                question: "Có mấy loại điện tích tồn tại trong tự nhiên?",
                options: [
                    "A. 1",
                    "B. 2",
                    "C. 3",
                    "D. 4"
                ],
                correct: 1,
                difficulty: "easy"
            },
            {
                question: "Phát biểu nào sau đây về sự tương tác điện là đúng?",
                options: [
                    "A. Các điện tích cùng dấu thì đẩy nhau.",
                    "B. Các điện tích khác dấu thì đẩy nhau.",
                    "C. Các điện tích luôn hút nhau.",
                    "D. Các điện tích không tương tác khi ở xa nhau."
                ],
                correct: 0,
                difficulty: "easy"
            },
            {
                question: "Đơn vị nào sau đây là đơn vị của điện tích?",
                options: [
                    "A. Niutơn (N)",
                    "B. Culông (C)",
                    "C. Vôn (V)",
                    "D. Fara (F)"
                ],
                correct: 1,
                difficulty: "easy"
            },
            {
                question: "Véctơ lực tương tác giữa hai điện tích điểm",
                options: [
                    "A. nằm trên đường thẳng nối hai điện tích.",
                    "B. có phương vuông góc với đường thẳng nối hai điện tích.",
                    "C. có phương phụ thuộc vào dấu của hai điện tích.",
                    "D. có chiều từ điện tích lớn sang điện tích nhỏ."
                ],
                correct: 0,
                difficulty: "easy"
            },
            {
                question: "Một thanh nhựa trung hòa điện sau khi cọ xát trở thành nhiễm điện âm. Nguyên nhân là do",
                options: [
                    "A. thanh nhựa mất bớt điện tích dương.",
                    "B. thanh nhựa nhận thêm electron.",
                    "C. thanh nhựa nhận thêm điện tích dương.",
                    "D. thanh nhựa mất bớt electron."
                ],
                correct: 1,
                difficulty: "easy"
            },
            {
                question: "Trong các môi trường sau, hằng số điện môi của môi trường nào lớn nhất?",
                options: [
                    "A. Chân không.",
                    "B. Không khí.",
                    "C. Nước tinh khiết.",
                    "D. Thủy tinh."
                ],
                correct: 3,
                difficulty: "easy"
            },
            {
                question: "Trong công thức định luật Coulomb, k là hằng số tỉ lệ. Giá trị của k trong hệ SI là",
                options: [
                    "A. 9×10⁻⁹ Nm²/C²",
                    "B. 9×10⁹ Nm²/C²",
                    "C. 9×10⁹ C²/Nm²",
                    "D. 9×10⁻⁹ C²/Nm²"
                ],
                correct: 1,
                difficulty: "easy"
            },
            {
                question: "Định luật Coulomb chỉ áp dụng được cho trường hợp",
                options: [
                    "A. các điện tích điểm.",
                    "B. các điện tích dịch chuyển.",
                    "C. các vật tích điện có kích thước lớn.",
                    "D. các vật nhiễm điện do cọ xát."
                ],
                correct: 0,
                difficulty: "medium"
            },
            {
                question: "Khi khoảng cách giữa hai điện tích điểm tăng lên gấp đôi trong chân không, độ lớn lực tương tác tĩnh điện giữa chúng sẽ",
                options: [
                    "A. tăng 4 lần.",
                    "B. giảm 4 lần.",
                    "C. tăng 2 lần.",
                    "D. giảm 2 lần."
                ],
                correct: 1,
                difficulty: "medium"
            },
            {
                question: "Hằng số điện môi của một chất cho biết",
                options: [
                    "A. lực tương tác giữa các điện tích trong chất đó lớn hơn trong chân không bao nhiêu lần.",
                    "B. lực tương tác giữa các điện tích trong chất đó nhỏ hơn trong chân không bao nhiêu lần.",
                    "C. khả năng dẫn điện của chất đó.",
                    "D. khả năng tích điện của chất đó."
                ],
                correct: 1,
                difficulty: "medium"
            },
            {
                question: "Hai quả cầu nhỏ tích điện đặt trong không khí cách nhau một khoảng r. Đưa chúng vào trong dầu hỏa có hằng số điện môi ε = 2 và giữ nguyên khoảng cách r. Lực tương tác điện giữa chúng sẽ",
                options: [
                    "A. tăng 2 lần.",
                    "B. giảm 2 lần.",
                    "C. tăng 4 lần.",
                    "D. không thay đổi."
                ],
                correct: 1,
                difficulty: "medium"
            },
            {
                question: "Hai điện tích điểm q₁ và q₂ đẩy nhau. Khẳng định nào sau đây là đúng?",
                options: [
                    "A. q₁ > 0 và q₂ > 0.",
                    "B. q₁ < 0 và q₂ < 0.",
                    "C. q₁.q₂ > 0.",
                    "D. Cả A, B và C đều có thể đúng."
                ],
                correct: 3,
                difficulty: "medium"
            },
            {
                question: "Cho hai điện tích điểm q₁ và q₂ đặt cách nhau một khoảng trong chân không. Nếu q₁' = 2q₁ và q₂' = -0.5q₂ (giữ nguyên khoảng cách), thì lực tương tác giữa chúng so với lực tương tác ban đầu F sẽ là",
                options: [
                    "A. bằng F.",
                    "B. bằng -F.",
                    "C. độ lớn bằng F, chiều ngược lại.",
                    "D. độ lớn bằng F, chiều giữ nguyên."
                ],
                correct: 2,
                difficulty: "medium"
            },
            {
                question: "Lực tương tác giữa hai điện tích điểm đặt trong dầu (ε = 4) là 5 N. Nếu đặt chúng trong không khí (ε ≈ 1) với khoảng cách như cũ thì lực tương tác giữa chúng là",
                options: [
                    "A. 1,25 N.",
                    "B. 5 N.",
                    "C. 10 N.",
                    "D. 20 N."
                ],
                correct: 3,
                difficulty: "medium"
            },
            {
                question: "Hai quả cầu nhỏ giống nhau, mang điện tích q₁ = 2×10⁻⁹ C và q₂ = -8×10⁻⁹ C, đặt trong không khí cách nhau 3 cm. Lực tương tác giữa chúng có độ lớn là (lấy k = 9×10⁹ Nm²/C²)",
                options: [
                    "A. 1,6×10⁻⁴ N",
                    "B. 1,6×10⁻⁵ N",
                    "C. 1,6×10⁻³ N",
                    "D. 16×10⁻⁴ N"
                ],
                correct: 0,
                difficulty: "medium"
            },
            {
                question: "Hai điện tích điểm bằng nhau, đặt trong chân không cách nhau một khoảng r₁ = 2 cm. Lực đẩy giữa chúng là F₁ = 1,6×10⁻⁴ N. Để lực tương tác giữa chúng là F₂ = 2,5×10⁻⁴ N thì khoảng cách r₂ giữa chúng là",
                options: [
                    "A. 1,6 cm.",
                    "B. 1,28 cm.",
                    "C. 2,5 cm.",
                    "D. 3,2 cm."
                ],
                correct: 0,
                difficulty: "hard"
            },
            {
                question: "Hai điện tích điểm đặt cách nhau 1 m trong không khí thì đẩy nhau một lực bằng 1,8 N. Điện tích tổng cộng của chúng là 3×10⁻⁵ C. Điện tích của mỗi vật là (Hai điện tích cùng dấu)",
                options: [
                    "A. 1,5×10⁻⁵ C và 1,5×10⁻⁵ C.",
                    "B. 2×10⁻⁵ C và 1×10⁻⁵ C.",
                    "C. 2,5×10⁻⁵ C và 0,5×10⁻⁵ C.",
                    "D. 2,6×10⁻⁵ C và 0,4×10⁻⁵ C."
                ],
                correct: 1,
                difficulty: "hard"
            },
            {
                question: "Hai điện tích điểm q₁ = 4×10⁻⁸ C và q₂ = -4×10⁻⁸ C đặt tại hai điểm A và B cách nhau 4 cm trong không khí. Lực tác dụng lên điện tích q = 2×10⁻⁹ C đặt tại điểm M cách A 4 cm, cách B 8 cm là",
                options: [
                    "A. 3,375×10⁻⁴ N.",
                    "B. 1,125×10⁻⁴ N.",
                    "C. 4,5×10⁻⁴ N.",
                    "D. 0 N."
                ],
                correct: 0,
                difficulty: "hard"
            },
            {
                question: "Hai điện tích điểm q₁ = +3×10⁻⁸ C và q₂ = -4×10⁻⁸ C đặt cách nhau 10 cm trong chân không. Lực tương tác giữa chúng có độ lớn và tính chất là",
                options: [
                    "A. 1,08×10⁻³ N, lực hút.",
                    "B. 1,08×10⁻⁴ N, lực hút.",
                    "C. 1,08×10⁻³ N, lực đẩy.",
                    "D. 1,08×10⁻⁴ N, lực đẩy."
                ],
                correct: 0,
                difficulty: "hard"
            }
        ];

        // Biến lưu trữ trạng thái bài trắc nghiệm
        let currentQuestion = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;
        let startTime;
        let timerInterval;
        let timeElapsed = 0;

        // Khởi tạo trang
        document.addEventListener('DOMContentLoaded', function() {
            initQuiz();
            startTimer();
            
            // Gán sự kiện cho các nút
            document.getElementById('prev-btn').addEventListener('click', prevQuestion);
            document.getElementById('next-btn').addEventListener('click', nextQuestion);
            document.getElementById('submit-btn').addEventListener('click', submitQuiz);
            document.getElementById('restart-btn').addEventListener('click', restartQuiz);
        });

        function initQuiz() {
            // Hiển thị câu hỏi đầu tiên
            showQuestion();
            
            // Cập nhật số câu đã trả lời
            updateAnsweredCount();
            
            // Cập nhật thanh tiến trình
            updateProgressBar();
            
            // Ẩn nút "Câu trước" cho câu đầu tiên
            document.getElementById('prev-btn').classList.add('btn-disabled');
            
            // Hiển thị nút "Nộp bài" nếu đã đến câu cuối
            if (currentQuestion === quizData.length - 1) {
                document.getElementById('next-btn').style.display = 'none';
                document.getElementById('submit-btn').style.display = 'block';
            } else {
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('submit-btn').style.display = 'none';
            }
        }

        function showQuestion() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            const questionData = quizData[currentQuestion];
            
            const questionElement = document.createElement('div');
            questionElement.className = 'question';
            
            let optionsHTML = '';
            questionData.options.forEach((option, index) => {
                const isSelected = userAnswers[currentQuestion] === index;
                const optionClass = isSelected ? 'option selected' : 'option';
                
                optionsHTML += `
                    <div class="${optionClass}" onclick="selectOption(${index})">
                        <input type="radio" name="option" id="option${index}" ${isSelected ? 'checked' : ''}>
                        <label for="option${index}">${option}</label>
                    </div>
                `;
            });
            
            // Xác định lớp CSS cho độ khó
            let difficultyClass = '';
            let difficultyText = '';
            if (questionData.difficulty === 'easy') {
                difficultyClass = 'easy';
                difficultyText = 'Dễ';
            } else if (questionData.difficulty === 'medium') {
                difficultyClass = 'medium';
                difficultyText = 'Trung bình';
            } else {
                difficultyClass = 'hard';
                difficultyText = 'Khó';
            }
            
            questionElement.innerHTML = `
                <div class="question-header">
                    <div class="question-number"><span>${currentQuestion + 1}</span> ${questionData.question}</div>
                    <div class="question-difficulty ${difficultyClass}">${difficultyText}</div>
                </div>
                <div class="options">${optionsHTML}</div>
            `;
            
            container.appendChild(questionElement);
            
            // Cập nhật thông tin câu hỏi hiện tại
            document.getElementById('current-question').textContent = `${currentQuestion + 1}/${quizData.length}`;
        }

        function selectOption(optionIndex) {
            // Lưu câu trả lời của người dùng
            userAnswers[currentQuestion] = optionIndex;
            
            // Cập nhật giao diện
            showQuestion();
            
            // Cập nhật số câu đã trả lời
            updateAnsweredCount();
            
            // Cập nhật thanh tiến trình
            updateProgressBar();
        }

        function updateAnsweredCount() {
            const answered = userAnswers.filter(answer => answer !== null).length;
            document.getElementById('answered-count').textContent = `${answered}/${quizData.length}`;
        }

        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
                updateProgressBar();
                
                // Hiển thị nút "Câu trước"
                document.getElementById('prev-btn').classList.remove('btn-disabled');
                
                // Ẩn nút "Nộp bài" nếu chưa phải câu cuối
                if (currentQuestion !== quizData.length - 1) {
                    document.getElementById('submit-btn').style.display = 'none';
                    document.getElementById('next-btn').style.display = 'block';
                } else {
                    // Hiển thị nút "Nộp bài" cho câu cuối
                    document.getElementById('next-btn').style.display = 'none';
                    document.getElementById('submit-btn').style.display = 'block';
                }
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
                updateProgressBar();
                
                // Ẩn nút "Câu trước" nếu đang ở câu đầu
                if (currentQuestion === 0) {
                    document.getElementById('prev-btn').classList.add('btn-disabled');
                }
                
                // Hiển thị nút "Câu tiếp theo" và ẩn nút "Nộp bài"
                document.getElementById('next-btn').style.display = 'block';
                document.getElementById('submit-btn').style.display = 'none';
            }
        }

        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const now = new Date();
            timeElapsed = Math.floor((now - startTime) / 1000);
            
            const minutes = Math.floor(timeElapsed / 60);
            const seconds = timeElapsed % 60;
            
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('timer').textContent = `Thời gian: ${timeString}`;
            document.getElementById('time-elapsed').textContent = timeString;
        }

        function submitQuiz() {
            // Dừng đồng hồ
            clearInterval(timerInterval);
            
            // Tính điểm
            calculateScore();
            
            // Hiển thị kết quả
            showResults();
        }

        function calculateScore() {
            let correctCount = 0;
            let easyCorrect = 0, mediumCorrect = 0, hardCorrect = 0;
            let easyTotal = 0, mediumTotal = 0, hardTotal = 0;
            
            for (let i = 0; i < quizData.length; i++) {
                const question = quizData[i];
                
                // Đếm tổng số câu theo độ khó
                if (question.difficulty === 'easy') easyTotal++;
                else if (question.difficulty === 'medium') mediumTotal++;
                else hardTotal++;
                
                // Kiểm tra câu trả lời đúng
                if (userAnswers[i] === quizData[i].correct) {
                    correctCount++;
                    
                    // Đếm câu đúng theo độ khó
                    if (question.difficulty === 'easy') easyCorrect++;
                    else if (question.difficulty === 'medium') mediumCorrect++;
                    else hardCorrect++;
                }
            }
            
            score = Math.round((correctCount / quizData.length) * 100);
            
            // Cập nhật kết quả tổng
            document.getElementById('score-value').textContent = score;
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = quizData.length - correctCount;
            
            const minutes = Math.floor(timeElapsed / 60);
            const seconds = timeElapsed % 60;
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('final-time').textContent = timeString;
            
            // Hiển thị thống kê theo độ khó
            showDifficultyStats(easyCorrect, easyTotal, mediumCorrect, mediumTotal, hardCorrect, hardTotal);
            
            // Hiển thị xem lại câu hỏi
            showQuestionReview(correctCount);
        }

        function showDifficultyStats(easyCorrect, easyTotal, mediumCorrect, mediumTotal, hardCorrect, hardTotal) {
            const statsContainer = document.getElementById('difficulty-stats');
            
            const easyPercentage = easyTotal > 0 ? Math.round((easyCorrect / easyTotal) * 100) : 0;
            const mediumPercentage = mediumTotal > 0 ? Math.round((mediumCorrect / mediumTotal) * 100) : 0;
            const hardPercentage = hardTotal > 0 ? Math.round((hardCorrect / hardTotal) * 100) : 0;
            
            statsContainer.innerHTML = `
                <div class="difficulty-stat easy-stat">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #2ecc71;">${easyCorrect}/${easyTotal}</div>
                    <div style="font-size: 0.9rem; color: #666;">Câu dễ</div>
                    <div style="font-size: 1rem; font-weight: 600; margin-top: 5px;">${easyPercentage}%</div>
                </div>
                <div class="difficulty-stat medium-stat">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #f39c12;">${mediumCorrect}/${mediumTotal}</div>
                    <div style="font-size: 0.9rem; color: #666;">Câu trung bình</div>
                    <div style="font-size: 1rem; font-weight: 600; margin-top: 5px;">${mediumPercentage}%</div>
                </div>
                <div class="difficulty-stat hard-stat">
                    <div style="font-size: 1.5rem; font-weight: bold; color: #e74c3c;">${hardCorrect}/${hardTotal}</div>
                    <div style="font-size: 0.9rem; color: #666;">Câu khó</div>
                    <div style="font-size: 1rem; font-weight: 600; margin-top: 5px;">${hardPercentage}%</div>
                </div>
            `;
        }

        function showQuestionReview(correctCount) {
            const reviewContainer = document.getElementById('question-review');
            reviewContainer.innerHTML = `<h3 class="review-title">Chi tiết bài làm (${correctCount}/${quizData.length} câu đúng)</h3>`;
            
            for (let i = 0; i < quizData.length; i++) {
                const questionData = quizData[i];
                const userAnswer = userAnswers[i];
                const correctAnswer = questionData.correct;
                
                // Xác định lớp CSS cho độ khó
                let difficultyClass = '';
                let difficultyText = '';
                if (questionData.difficulty === 'easy') {
                    difficultyClass = 'easy';
                    difficultyText = 'Dễ';
                } else if (questionData.difficulty === 'medium') {
                    difficultyClass = 'medium';
                    difficultyText = 'Trung bình';
                } else {
                    difficultyClass = 'hard';
                    difficultyText = 'Khó';
                }
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                let answerStatus = '';
                if (userAnswer === correctAnswer) {
                    answerStatus = '<span class="review-answer">✓ ĐÚNG</span>';
                } else {
                    answerStatus = `
                        <div><span class="review-user-answer">✗ Bạn chọn: ${questionData.options[userAnswer] || "Không trả lời"}</span></div>
                        <div><span class="review-answer">✓ Đáp án đúng: ${questionData.options[correctAnswer]}</span></div>
                    `;
                }
                
                reviewItem.innerHTML = `
                    <div class="review-question">
                        <div><strong>Câu ${i + 1}:</strong> ${questionData.question}</div>
                        <div class="review-difficulty ${difficultyClass}">${difficultyText}</div>
                    </div>
                    <div>${answerStatus}</div>
                `;
                
                reviewContainer.appendChild(reviewItem);
            }
        }

        function showResults() {
            // Ẩn phần câu hỏi và điều khiển
            document.getElementById('questions-container').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.controls').style.display = 'none';
            document.querySelector('.quiz-info').style.display = 'none';
            
            // Hiển thị kết quả
            document.getElementById('results-container').style.display = 'block';
        }

        function restartQuiz() {
            // Đặt lại tất cả biến
            currentQuestion = 0;
            userAnswers = new Array(quizData.length).fill(null);
            score = 0;
            timeElapsed = 0;
            
            // Đặt lại giao diện
            document.getElementById('questions-container').style.display = 'block';
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.controls').style.display = 'flex';
            document.querySelector('.quiz-info').style.display = 'flex';
            document.getElementById('results-container').style.display = 'none';
            
            // Đặt lại đồng hồ
            clearInterval(timerInterval);
            startTimer();
            
            // Khởi tạo lại bài trắc nghiệm
            initQuiz();
            
            // Cuộn lên đầu trang
            window.scrollTo(0, 0);
        }

        // Gán các hàm vào global scope để có thể gọi từ HTML
        window.selectOption = selectOption;
        window.nextQuestion = nextQuestion;
        window.prevQuestion = prevQuestion;
        window.submitQuiz = submitQuiz;
        window.restartQuiz = restartQuiz;
    </script>
</body>
</html>