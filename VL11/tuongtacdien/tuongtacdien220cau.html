<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trắc nghiệm Vật lý 11 - Lực tương tác điện tích (20 câu)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(to right, #2c3e50, #4a6fa5);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .control-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #ddd;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer-box {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            background: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .timer-box i {
            color: #e74c3c;
        }

        .progress-container {
            flex-grow: 1;
            max-width: 400px;
        }

        .progress-bar {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 14px;
            color: #666;
        }

        .controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #219653;
            transform: translateY(-2px);
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
            transform: translateY(-2px);
        }

        .content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 250px;
            background: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }

        .question-nav {
            flex-grow: 1;
        }

        .question-nav h3 {
            margin-bottom: 15px;
            color: #2c3e50;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }

        .question-number-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-number-btn:hover {
            border-color: #3498db;
            background: #f0f8ff;
        }

        .question-number-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .question-number-btn.answered {
            background: #27ae60;
            color: white;
            border-color: #27ae60;
        }

        .question-number-btn.marked {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }

        .legend {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }

        .legend h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }

        .question-area {
            flex-grow: 1;
            padding: 30px;
            background: white;
        }

        .question-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .question-title {
            font-size: 20px;
            color: #2c3e50;
        }

        .question-title span {
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 16px;
        }

        .question-text {
            font-size: 18px;
            margin-bottom: 25px;
            line-height: 1.6;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            padding: 18px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 17px;
        }

        .option:hover {
            background: #f0f8ff;
            border-color: #3498db;
        }

        .option.selected {
            background: #d4edda;
            border-color: #27ae60;
            color: #155724;
        }

        .option-label {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            background: #f0f0f0;
            flex-shrink: 0;
        }

        .option.selected .option-label {
            background: #27ae60;
            color: white;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            background: linear-gradient(to right, #2c3e50, #4a6fa5);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .modal-header h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .score-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 30px;
            background: #f8f9fa;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .score-value {
            font-size: 48px;
            font-weight: bold;
            color: #27ae60;
        }

        .score-label {
            font-size: 18px;
            color: #666;
        }

        .score-details {
            flex-grow: 1;
        }

        .score-details h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .modal-body {
            padding: 25px;
            max-height: 50vh;
            overflow-y: auto;
        }

        .result-question {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .result-question.correct {
            border-left: 4px solid #27ae60;
        }

        .result-question.incorrect {
            border-left: 4px solid #e74c3c;
        }

        .result-question-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .question-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .correct .question-status {
            background: #d4edda;
            color: #155724;
        }

        .incorrect .question-status {
            background: #f8d7da;
            color: #721c24;
        }

        .modal-footer {
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            border-top: 1px solid #ddd;
        }

        @media (max-width: 992px) {
            .content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #ddd;
            }
            
            .question-area {
                padding: 20px;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: stretch;
            }
            
            .progress-container {
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }
            
            .question-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .score-display {
                flex-direction: column;
                gap: 20px;
            }
            
            .controls {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-bolt"></i> TRẮC NGHIỆM VẬT LÝ 11</h1>
            <p>Chủ đề: Lực tương tác giữa các điện tích - 20 câu hỏi</p>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="timer-box">
                <i class="fas fa-clock"></i>
                <span id="timer">30:00</span>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress" id="progress-bar"></div>
                </div>
                <div class="progress-text">
                    <span>Tiến độ: <span id="answered-count">0</span>/20 câu</span>
                    <span id="progress-percent">0%</span>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn btn-primary" id="prev-btn">
                    <i class="fas fa-arrow-left"></i> Câu trước
                </button>
                <button class="btn btn-success" id="submit-btn">
                    <i class="fas fa-paper-plane"></i> Nộp bài
                </button>
                <button class="btn btn-warning" id="mark-btn">
                    <i class="fas fa-bookmark"></i> Đánh dấu
                </button>
                <button class="btn btn-primary" id="next-btn">
                    Câu sau <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Sidebar with Question Navigation -->
            <div class="sidebar">
                <div class="question-nav">
                    <h3><i class="fas fa-list-ol"></i> Danh sách câu hỏi</h3>
                    <div class="question-grid" id="question-nav-grid">
                        <!-- Questions 1-20 will be generated by JavaScript -->
                    </div>
                </div>
                
                <div class="legend">
                    <h4><i class="fas fa-info-circle"></i> Chú thích</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #3498db;"></div>
                        <span>Câu hiện tại</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #27ae60;"></div>
                        <span>Đã trả lời</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f39c12;"></div>
                        <span>Đã đánh dấu</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e0e0e0;"></div>
                        <span>Chưa trả lời</span>
                    </div>
                </div>
            </div>

            <!-- Question Area -->
            <div class="question-area">
                <div class="question-container">
                    <div class="question-header">
                        <div class="question-title">
                            Câu hỏi số <span id="current-question-number">1</span>
                        </div>
                        <div id="question-tag" style="font-size: 14px; color: #666;">
                            <i class="fas fa-tag"></i> Kiến thức cơ bản
                        </div>
                    </div>
                    
                    <div class="question-text" id="question-text">
                        <!-- Question text will be loaded here -->
                    </div>
                    
                    <div class="options-container" id="options-container">
                        <!-- Options will be loaded here -->
                    </div>
                    
                    <div class="navigation-buttons">
                        <button class="btn btn-primary" id="prev-btn-bottom">
                            <i class="fas fa-arrow-left"></i> Câu trước
                        </button>
                        <button class="btn btn-warning" id="mark-btn-bottom">
                            <i class="fas fa-bookmark"></i> Đánh dấu câu hỏi
                        </button>
                        <button class="btn btn-primary" id="next-btn-bottom">
                            Câu sau <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div class="modal-overlay" id="result-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-trophy"></i> KẾT QUẢ BÀI LÀM</h2>
                <p>Bài trắc nghiệm: Lực tương tác giữa các điện tích (20 câu)</p>
            </div>
            
            <div class="score-display">
                <div class="score-circle">
                    <div class="score-value" id="final-score">0</div>
                    <div class="score-label">ĐIỂM</div>
                </div>
                
                <div class="score-details">
                    <h3>Thống kê chi tiết</h3>
                    <div class="detail-item">
                        <span>Tổng số câu:</span>
                        <strong>20</strong>
                    </div>
                    <div class="detail-item">
                        <span>Câu đúng:</span>
                        <strong style="color: #27ae60;" id="correct-count">0</strong>
                    </div>
                    <div class="detail-item">
                        <span>Câu sai:</span>
                        <strong style="color: #e74c3c;" id="incorrect-count">0</strong>
                    </div>
                    <div class="detail-item">
                        <span>Câu chưa làm:</span>
                        <strong style="color: #f39c12;" id="unanswered-count">0</strong>
                    </div>
                    <div class="detail-item">
                        <span>Thời gian hoàn thành:</span>
                        <strong id="time-taken">0:00</strong>
                    </div>
                    <div class="detail-item">
                        <span>Tỷ lệ đúng:</span>
                        <strong id="accuracy-rate">0%</strong>
                    </div>
                </div>
            </div>
            
            <div class="modal-body">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">Xem lại bài làm</h3>
                <div id="result-questions-container">
                    <!-- Results will be loaded here -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-primary" id="restart-btn">
                    <i class="fas fa-redo"></i> Làm lại bài
                </button>
                <button class="btn btn-success" id="close-modal-btn">
                    <i class="fas fa-check"></i> Đóng
                </button>
            </div>
        </div>
    </div>

    <script>
        // Question data for 20 questions
        const questions = [
            {
                id: 1,
                text: "Hai điện tích điểm cùng dấu đặt gần nhau thì",
                options: [
                    "hút nhau.",
                    "đẩy nhau.",
                    "lúc đầu hút nhau sau đó đẩy nhau.",
                    "không tương tác."
                ],
                correctAnswer: 1,
                explanation: "Theo định luật Cu-lông, hai điện tích cùng dấu thì đẩy nhau, khác dấu thì hút nhau.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 2,
                text: "Định luật Cu-lông mô tả tương tác giữa",
                options: [
                    "các điện tích điểm.",
                    "các nam châm.",
                    "các điện tích phân bố liên tục.",
                    "điện tích và nam châm."
                ],
                correctAnswer: 0,
                explanation: "Định luật Cu-lông mô tả tương tác giữa các điện tích điểm.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 3,
                text: "Biểu thức của định luật Cu-lông là:",
                options: [
                    "F = k|q₁q₂|/r",
                    "F = k|q₁q₂|/r²",
                    "F = |q₁q₂|/r²",
                    "F = kr²/|q₁q₂|"
                ],
                correctAnswer: 1,
                explanation: "Công thức chính xác của định luật Cu-lông là F = k|q₁q₂|/r².",
                category: "Kiến thức cơ bản"
            },
            {
                id: 4,
                text: "Hằng số điện môi của chân không bằng",
                options: [
                    "0.",
                    "1.",
                    "8,85×10⁻¹².",
                    "9×10⁹."
                ],
                correctAnswer: 1,
                explanation: "Hằng số điện môi của chân không ε = 1.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 5,
                text: "Hai quả cầu nhỏ mang điện tích q₁ = 2 nC và q₂ = -6 nC đặt cách nhau 3 cm trong chân không. Lực tương tác giữa chúng là",
                options: [
                    "lực hút, độ lớn 1,2×10⁻⁴ N.",
                    "lực đẩy, độ lớn 1,2×10⁻⁴ N.",
                    "lực hút, độ lớn 1,2×10⁻³ N.",
                    "lực đẩy, độ lớn 1,2×10⁻³ N."
                ],
                correctAnswer: 0,
                explanation: "F = k|q₁q₂|/r² = 9×10⁹ × |2×10⁻⁹ × (-6)×10⁻⁹| / (0,03)² = 1,2×10⁻⁴ N. Vì trái dấu nên là lực hút.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 6,
                text: "Đặt hai điện tích điểm trong dầu hỏa (ε = 2) thì lực tương tác so với trong chân không sẽ",
                options: [
                    "tăng 2 lần.",
                    "giảm 2 lần.",
                    "tăng 4 lần.",
                    "không đổi."
                ],
                correctAnswer: 1,
                explanation: "Trong môi trường điện môi, lực giảm ε lần: F = F₀/ε → giảm 2 lần.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 7,
                text: "Hai điện tích điểm bằng nhau đặt cách nhau 2 cm trong không khí, lực đẩy giữa chúng là 1,6×10⁻⁴ N. Độ lớn mỗi điện tích là",
                options: [
                    "2,67×10⁻⁹ C.",
                    "8,43×10⁻⁹ C.",
                    "1,6×10⁻⁹ C.",
                    "2,67×10⁻⁸ C."
                ],
                correctAnswer: 1,
                explanation: "Từ F = kq²/r² → q = √(Fr²/k) = √[(1,6×10⁻⁴ × (0,02)²) / (9×10⁹)] ≈ 8,43×10⁻⁹ C.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 8,
                text: "Có ba điện tích điểm q₁, q₂, q₃ nằm trên một đường thẳng. Nếu lực tác dụng lên q₂ bằng 0 thì",
                options: [
                    "q₁ và q₃ cùng dấu.",
                    "q₁ và q₃ trái dấu.",
                    "q₁, q₂, q₃ cùng dấu.",
                    "không phụ thuộc vào dấu của các điện tích."
                ],
                correctAnswer: 0,
                explanation: "Với q₂ nằm giữa, để lực tác dụng lên q₂ bằng 0 thì q₁ và q₃ phải cùng dấu.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 9,
                text: "Lực tương tác giữa hai điện tích điểm sẽ thay đổi thế nào nếu khoảng cách giữa chúng tăng gấp đôi?",
                options: [
                    "Tăng 4 lần.",
                    "Giảm 4 lần.",
                    "Tăng 2 lần.",
                    "Giảm 2 lần."
                ],
                correctAnswer: 1,
                explanation: "F tỉ lệ nghịch với r², nên r tăng 2 lần thì F giảm 4 lần.",
                category: "Kiến thức cơ bản"
            },
            {
                id: 10,
                text: "Véctơ lực tương tác giữa hai điện tích điểm",
                options: [
                    "cùng phương, ngược chiều với đường nối hai điện tích.",
                    "cùng phương, cùng chiều với đường nối hai điện tích.",
                    "nằm trên đường nối hai điện tích, hướng vào nhau nếu chúng trái dấu.",
                    "nằm trên đường nối hai điện tích, hướng ra xa nhau nếu chúng trái dấu."
                ],
                correctAnswer: 2,
                explanation: "Véctơ lực nằm trên đường nối hai điện tích, hướng vào nhau nếu trái dấu (hút), hướng ra xa nếu cùng dấu (đẩy).",
                category: "Kiến thức cơ bản"
            },
            {
                id: 11,
                text: "Hai điện tích điểm q₁ = 4×10⁻⁸ C và q₂ = -4×10⁻⁸ C đặt tại A và B cách nhau 6 cm trong không khí. Lực tác dụng lên điện tích q₀ = 2×10⁻⁹ C đặt tại trung điểm O của AB có độ lớn là",
                options: [
                    "0 N.",
                    "8×10⁻⁴ N.",
                    "16×10⁻⁴ N.",
                    "32×10⁻⁴ N."
                ],
                correctAnswer: 2,
                explanation: "F₁ = F₂ = 8×10⁻⁴ N, cùng chiều nên F = 16×10⁻⁴ N.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 12,
                text: "Hai điện tích điểm q₁ = +3×10⁻⁸ C và q₂ = -4×10⁻⁸ C đặt cách nhau 10 cm trong chân không. Lực tương tác giữa chúng có độ lớn là",
                options: [
                    "1,08×10⁻⁴ N.",
                    "1,08×10⁻³ N.",
                    "2,16×10⁻⁴ N.",
                    "2,16×10⁻³ N."
                ],
                correctAnswer: 0,
                explanation: "F = k|q₁q₂|/r² = 9×10⁹ × |3×10⁻⁸ × (-4)×10⁻⁸| / (0,1)² = 1,08×10⁻⁴ N.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 13,
                text: "Hai điện tích điểm đặt trong không khí cách nhau 12 cm, lực tương tác giữa chúng bằng 10 N. Nếu đặt chúng trong dầu (ε = 2) và để lực tương tác vẫn là 10 N thì khoảng cách giữa chúng phải là",
                options: [
                    "6 cm.",
                    "8,5 cm.",
                    "12 cm.",
                    "17 cm."
                ],
                correctAnswer: 1,
                explanation: "Trong dầu, lực giảm ε lần nên để giữ nguyên lực, phải giảm khoảng cách: r' = r/√ε = 12/√2 ≈ 8,5 cm.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 14,
                text: "Hai điện tích điểm q₁ = 2 μC và q₂ = -8 μC đặt tại A và B cách nhau 12 cm. Điểm M tại đó cường độ điện trường bằng 0 nằm",
                options: [
                    "trong đoạn AB, cách A 4 cm.",
                    "trong đoạn AB, cách A 8 cm.",
                    "ngoài đoạn AB, gần A hơn.",
                    "ngoài đoạn AB, gần B hơn."
                ],
                correctAnswer: 0,
                explanation: "Vì q₁ và q₂ trái dấu nên điểm M phải nằm trong đoạn AB. Gọi MA = x, MB = 12-x. Điều kiện: k|q₁|/x² = k|q₂|/(12-x)² → 2/x² = 8/(12-x)² → x = 4 cm.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 15,
                text: "Hai điện tích điểm bằng nhau đặt trong chân không cách nhau 4 cm thì lực đẩy giữa chúng là 10⁻⁵ N. Để lực tương tác giữa chúng là 4×10⁻⁵ N thì khoảng cách giữa chúng là",
                options: [
                    "1 cm.",
                    "2 cm.",
                    "8 cm.",
                    "16 cm."
                ],
                correctAnswer: 1,
                explanation: "F tỉ lệ nghịch với r². F tăng 4 lần thì r giảm 2 lần: r' = 4/2 = 2 cm.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 16,
                text: "Hai điện tích điểm q₁ = q₂ = 10⁻⁶ C đặt tại hai điểm A và B trong không khí cách nhau 10 cm. Lực tương tác giữa chúng là",
                options: [
                    "0,9 N.",
                    "9 N.",
                    "90 N.",
                    "900 N."
                ],
                correctAnswer: 0,
                explanation: "F = kq₁q₂/r² = 9×10⁹ × (10⁻⁶)² / (0,1)² = 0,9 N.",
                category: "Vận dụng cơ bản"
            },
            {
                id: 17,
                text: "Hai điện tích điểm q₁ = 4×10⁻⁸ C và q₂ = -4×10⁻⁸ C đặt tại A và B trong không khí cách nhau 6 cm. Điện tích q₃ = 2×10⁻⁸ C đặt tại M trên trung trực của AB, cách AB 4 cm. Lực điện tổng hợp tác dụng lên q₃ có độ lớn là",
                options: [
                    "3,6×10⁻³ N.",
                    "4,8×10⁻³ N.",
                    "6,0×10⁻³ N.",
                    "7,2×10⁻³ N."
                ],
                correctAnswer: 1,
                explanation: "Khoảng cách từ M đến mỗi điện tích: 5 cm. F₁ = F₂ = 2,88×10⁻³ N. Hợp lực dọc theo trung trực: F = 2×2,88×10⁻³×(4/5) = 4,608×10⁻³ N ≈ 4,8×10⁻³ N.",
                category: "Vận dụng cao"
            },
            {
                id: 18,
                text: "Hai điện tích điểm q₁ = 9×10⁻⁶ C và q₂ = -16×10⁻⁶ C đặt tại hai điểm A và B trong không khí cách nhau 25 cm. Điểm M tại đó cường độ điện trường bằng 0 nằm",
                options: [
                    "trong đoạn AB, cách A 15 cm.",
                    "trong đoạn AB, cách A 10 cm.",
                    "ngoài đoạn AB, cách A 45 cm.",
                    "ngoài đoạn AB, cách A 75 cm."
                ],
                correctAnswer: 3,
                explanation: "Vì trái dấu và |q₂| > |q₁| nên M nằm ngoài về phía điện tích nhỏ hơn (q₁). Giải: 9/x² = 16/(x+25)² → x = 75 cm.",
                category: "Vận dụng cao"
            },
            {
                id: 19,
                text: "Hai quả cầu nhỏ giống nhau, mỗi quả có điện tích q và khối lượng m = 1 g, được treo bằng hai dây mảnh cùng chiều dài l = 20 cm vào cùng một điểm. Khi cân bằng, hai dây treo vuông góc với nhau. Lấy g = 10 m/s². Giá trị của q là",
                options: [
                    "0,5×10⁻⁷ C.",
                    "1,0×10⁻⁷ C.",
                    "1,5×10⁻⁷ C.",
                    "2,0×10⁻⁷ C."
                ],
                correctAnswer: 1,
                explanation: "Khi vuông góc, góc mỗi dây với phương thẳng đứng là 45°. tan45° = 1 = F/(mg). F = mg = 0,01 N. r = 2l sin45° = 0,2828 m. q = √(Fr²/k) ≈ 1,0×10⁻⁷ C.",
                category: "Vận dụng cao"
            },
            {
                id: 20,
                text: "Hai điện tích điểm q₁ = 2×10⁻⁸ C và q₂ = -8×10⁻⁸ C đặt tại A và B trong không khí cách nhau 12 cm. Điểm M trên đường thẳng AB, trong đoạn AB, có cường độ điện trường tổng hợp bằng 0. Vị trí của M là",
                options: [
                    "cách A 4 cm.",
                    "cách A 6 cm.",
                    "cách A 8 cm.",
                    "cách A 10 cm."
                ],
                correctAnswer: 0,
                explanation: "Vì trái dấu nên M nằm trong đoạn AB. Giải: 2/x² = 8/(12-x)² → x = 4 cm.",
                category: "Vận dụng cao"
            }
        ];

        // Quiz state
        let currentQuestion = 0;
        let userAnswers = Array(questions.length).fill(null);
        let markedQuestions = Array(questions.length).fill(false);
        let timeLeft = 30 * 60; // 30 minutes in seconds
        let timerInterval;
        let quizCompleted = false;

        // DOM Elements
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const currentQuestionNumber = document.getElementById('current-question-number');
        const questionTag = document.getElementById('question-tag');
        const questionNavGrid = document.getElementById('question-nav-grid');
        const progressBar = document.getElementById('progress-bar');
        const progressPercent = document.getElementById('progress-percent');
        const answeredCount = document.getElementById('answered-count');
        const timerElement = document.getElementById('timer');
        const resultModal = document.getElementById('result-modal');
        const finalScore = document.getElementById('final-score');
        const correctCount = document.getElementById('correct-count');
        const incorrectCount = document.getElementById('incorrect-count');
        const unansweredCount = document.getElementById('unanswered-count');
        const timeTaken = document.getElementById('time-taken');
        const accuracyRate = document.getElementById('accuracy-rate');
        const resultQuestionsContainer = document.getElementById('result-questions-container');

        // Initialize the quiz
        function initQuiz() {
            // Generate question navigation buttons
            generateQuestionNav();
            
            // Load first question
            loadQuestion(currentQuestion);
            
            // Start timer
            startTimer();
            
            // Update progress
            updateProgress();
        }

        // Generate question navigation buttons
        function generateQuestionNav() {
            questionNavGrid.innerHTML = '';
            
            questions.forEach((question, index) => {
                const button = document.createElement('button');
                button.className = 'question-number-btn';
                button.textContent = index + 1;
                button.addEventListener('click', () => {
                    currentQuestion = index;
                    loadQuestion(currentQuestion);
                    updateQuestionNav();
                });
                
                questionNavGrid.appendChild(button);
            });
            
            updateQuestionNav();
        }

        // Update question navigation buttons
        function updateQuestionNav() {
            const buttons = document.querySelectorAll('.question-number-btn');
            
            buttons.forEach((button, index) => {
                button.classList.remove('active', 'answered', 'marked');
                
                if (index === currentQuestion) {
                    button.classList.add('active');
                }
                
                if (userAnswers[index] !== null) {
                    button.classList.add('answered');
                }
                
                if (markedQuestions[index]) {
                    button.classList.add('marked');
                }
            });
        }

        // Load question
        function loadQuestion(index) {
            const question = questions[index];
            
            // Update question number and category
            currentQuestionNumber.textContent = index + 1;
            questionTag.innerHTML = `<i class="fas fa-tag"></i> ${question.category}`;
            
            // Update question text
            questionText.textContent = question.text;
            
            // Clear options container
            optionsContainer.innerHTML = '';
            
            // Create option elements
            const optionLabels = ['A', 'B', 'C', 'D'];
            
            question.options.forEach((option, optionIndex) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[index] === optionIndex) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.innerHTML = `
                    <div class="option-label">${optionLabels[optionIndex]}</div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener('click', () => {
                    selectOption(optionIndex);
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Update navigation buttons
            updateQuestionNav();
        }

        // Select an option
        function selectOption(optionIndex) {
            userAnswers[currentQuestion] = optionIndex;
            loadQuestion(currentQuestion);
            updateProgress();
        }

        // Mark current question
        function markQuestion() {
            markedQuestions[currentQuestion] = !markedQuestions[currentQuestion];
            updateQuestionNav();
            
            // Update mark button text
            const markBtn = document.getElementById('mark-btn');
            const markBtnBottom = document.getElementById('mark-btn-bottom');
            const markText = markedQuestions[currentQuestion] ? 'Bỏ đánh dấu' : 'Đánh dấu';
            
            markBtn.innerHTML = `<i class="fas fa-bookmark"></i> ${markText}`;
            markBtnBottom.innerHTML = `<i class="fas fa-bookmark"></i> ${markText} câu hỏi`;
        }

        // Navigate to next question
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion(currentQuestion);
            }
        }

        // Navigate to previous question
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion(currentQuestion);
            }
        }

        // Update progress
        function updateProgress() {
            const answered = userAnswers.filter(answer => answer !== null).length;
            const total = questions.length;
            const percent = Math.round((answered / total) * 100);
            
            progressBar.style.width = `${percent}%`;
            progressPercent.textContent = `${percent}%`;
            answeredCount.textContent = answered;
        }

        // Start timer
        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Change color when time is running out
            if (timeLeft < 300) { // 5 minutes
                timerElement.style.color = '#e74c3c';
            }
        }

        // Calculate score
        function calculateScore() {
            let correct = 0;
            let incorrect = 0;
            let unanswered = 0;
            
            questions.forEach((question, index) => {
                if (userAnswers[index] === null) {
                    unanswered++;
                } else if (userAnswers[index] === question.correctAnswer) {
                    correct++;
                } else {
                    incorrect++;
                }
            });
            
            // Scale to 10 points
            const score = Math.round((correct / questions.length) * 10 * 100) / 100;
            const accuracy = Math.round((correct / (correct + incorrect)) * 100) || 0;
            
            return {
                score,
                correct,
                incorrect,
                unanswered,
                accuracy
            };
        }

        // Submit quiz
        function submitQuiz() {
            if (quizCompleted) return;
            
            clearInterval(timerInterval);
            quizCompleted = true;
            
            // Calculate results
            const results = calculateScore();
            const timeUsed = 30 * 60 - timeLeft;
            const minutesUsed = Math.floor(timeUsed / 60);
            const secondsUsed = timeUsed % 60;
            
            // Display results
            finalScore.textContent = results.score.toFixed(2);
            correctCount.textContent = results.correct;
            incorrectCount.textContent = results.incorrect;
            unansweredCount.textContent = results.unanswered;
            timeTaken.textContent = `${minutesUsed.toString().padStart(2, '0')}:${secondsUsed.toString().padStart(2, '0')}`;
            accuracyRate.textContent = `${results.accuracy}%`;
            
            // Generate result details
            generateResultDetails();
            
            // Show modal
            resultModal.style.display = 'flex';
        }

        // Generate result details
        function generateResultDetails() {
            resultQuestionsContainer.innerHTML = '';
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correctAnswer;
                const isAnswered = userAnswer !== null;
                
                const resultQuestion = document.createElement('div');
                resultQuestion.className = `result-question ${isCorrect ? 'correct' : 'incorrect'}`;
                
                const optionLabels = ['A', 'B', 'C', 'D'];
                const userAnswerText = isAnswered ? optionLabels[userAnswer] : 'Không trả lời';
                const correctAnswerText = optionLabels[question.correctAnswer];
                
                resultQuestion.innerHTML = `
                    <div class="result-question-header">
                        <strong>Câu ${index + 1}</strong>
                        <div class="question-status">
                            ${isCorrect ? 'ĐÚNG' : 'SAI'}
                        </div>
                    </div>
                    <p><strong>Câu hỏi:</strong> ${question.text}</p>
                    <p><strong>Đáp án của bạn:</strong> ${userAnswerText}</p>
                    <p><strong>Đáp án đúng:</strong> ${correctAnswerText}</p>
                    <p><strong>Giải thích:</strong> ${question.explanation}</p>
                `;
                
                resultQuestionsContainer.appendChild(resultQuestion);
            });
        }

        // Restart quiz
        function restartQuiz() {
            // Reset state
            currentQuestion = 0;
            userAnswers = Array(questions.length).fill(null);
            markedQuestions = Array(questions.length).fill(false);
            timeLeft = 30 * 60;
            quizCompleted = false;
            
            // Close modal
            resultModal.style.display = 'none';
            
            // Reload first question
            loadQuestion(currentQuestion);
            
            // Update progress
            updateProgress();
            
            // Restart timer
            clearInterval(timerInterval);
            startTimer();
            
            // Reset timer color
            timerElement.style.color = '';
            
            // Reset mark buttons
            const markBtn = document.getElementById('mark-btn');
            const markBtnBottom = document.getElementById('mark-btn-bottom');
            markBtn.innerHTML = '<i class="fas fa-bookmark"></i> Đánh dấu';
            markBtnBottom.innerHTML = '<i class="fas fa-bookmark"></i> Đánh dấu câu hỏi';
        }

        // Event Listeners
        document.getElementById('prev-btn').addEventListener('click', prevQuestion);
        document.getElementById('prev-btn-bottom').addEventListener('click', prevQuestion);
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('next-btn-bottom').addEventListener('click', nextQuestion);
        document.getElementById('mark-btn').addEventListener('click', markQuestion);
        document.getElementById('mark-btn-bottom').addEventListener('click', markQuestion);
        document.getElementById('submit-btn').addEventListener('click', submitQuiz);
        document.getElementById('restart-btn').addEventListener('click', restartQuiz);
        document.getElementById('close-modal-btn').addEventListener('click', () => {
            resultModal.style.display = 'none';
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                nextQuestion();
            } else if (e.key === 'ArrowLeft') {
                prevQuestion();
            } else if (e.key === 'm' || e.key === 'M') {
                markQuestion();
            } else if (e.key === 's' || e.key === 'S') {
                submitQuiz();
            } else if (e.key >= '1' && e.key <= '4') {
                // Select option 0-3 when pressing 1-4
                const optionIndex = parseInt(e.key) - 1;
                selectOption(optionIndex);
            }
        });

        // Close modal when clicking outside
        resultModal.addEventListener('click', (e) => {
            if (e.target === resultModal) {
                resultModal.style.display = 'none';
            }
        });

        // Initialize the quiz
        initQuiz();
    </script>
</body>
</html>